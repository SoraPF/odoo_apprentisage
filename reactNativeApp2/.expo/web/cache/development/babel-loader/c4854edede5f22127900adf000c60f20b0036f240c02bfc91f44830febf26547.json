{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar authenticateAndGetSession = function () {\n  var _ref = (0, _asyncToGenerator2.default)(function* (username, password) {\n    try {\n      var odooAuthEndpoint = 'http://172.0.0.1:8069/web/session/authenticate';\n      var authResponse = yield _axios.default.post(odooAuthEndpoint, {\n        jsonrpc: '2.0',\n        params: {\n          db: 'odoo',\n          login: username,\n          password: password\n        }\n      });\n      var sessionId = authResponse.data.result.session_id;\n      console.log(\"bonjour odoo\");\n      yield fetchData(sessionId);\n    } catch (error) {\n      if (error.isAxiosError) {\n        console.error('Axios Error Details:', error.toJSON());\n      } else {\n        console.error('Non-Axios Error:', error);\n      }\n    }\n  });\n  return function authenticateAndGetSession(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar fetchData = function () {\n  var _ref2 = (0, _asyncToGenerator2.default)(function* (sessionId) {\n    try {\n      var odooApiEndpoint = 'https://odoo.local/fr_BE/frontend_contact/contact';\n      var response = yield _axios.default.get(odooApiEndpoint, {\n        headers: {\n          Cookie: `session_id=${sessionId}`\n        }\n      });\n      console.log(\"dernier réponse d'odoo\");\n      var responseData = response.data;\n      console.log('Data retrieved:', responseData);\n    } catch (error) {\n      console.error('API request error:', error);\n    }\n  });\n  return function fetchData(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar _default = exports.default = {\n  authenticateAndGetSession: authenticateAndGetSession\n};","map":{"version":3,"names":["_axios","_interopRequireDefault","require","authenticateAndGetSession","_ref","_asyncToGenerator2","default","username","password","odooAuthEndpoint","authResponse","axios","post","jsonrpc","params","db","login","sessionId","data","result","session_id","console","log","fetchData","error","isAxiosError","toJSON","_x","_x2","apply","arguments","_ref2","odooApiEndpoint","response","get","headers","Cookie","responseData","_x3","_default","exports"],"sources":["/home/jason/odoo/custom_addons/reactNativeApp2/pages_tsx/authentification.js"],"sourcesContent":["import axios from 'axios';\n\nconst authenticateAndGetSession = async (username, password) => {\n  try {\n    const odooAuthEndpoint = 'http://172.0.0.1:8069/web/session/authenticate';\n\n    const authResponse = await axios.post(odooAuthEndpoint, {\n      jsonrpc: '2.0',\n      params: {\n        db: 'odoo',\n        login: username,\n        password: password,\n      },\n    });\n\n    // Assuming the authentication response contains a session ID\n    const sessionId = authResponse.data.result.session_id;\n    console.log(\"bonjour odoo\");\n    // Call your fetchData function with the obtained session ID\n    await fetchData(sessionId);\n  } catch (error) {\n    if (error.isAxiosError) {\n    console.error('Axios Error Details:', error.toJSON());\n    } else {\n      console.error('Non-Axios Error:', error);\n    }\n  }\n};\n\nconst fetchData = async (sessionId) => {\n  try {\n    const odooApiEndpoint = 'https://odoo.local/fr_BE/frontend_contact/contact';\n\n    const response = await axios.get(odooApiEndpoint, {\n      headers: {\n        Cookie: `session_id=${sessionId}`,\n      },\n    });\n    console.log(\"dernier réponse d'odoo\");\n    // Handle the API response as needed\n    const responseData = response.data;\n    console.log('Data retrieved:', responseData);\n  } catch (error) {\n    console.error('API request error:', error);\n  }\n};\n\nexport default {\n  authenticateAndGetSession,\n};"],"mappings":";;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,IAAMC,yBAAyB;EAAA,IAAAC,IAAA,OAAAC,kBAAA,CAAAC,OAAA,EAAG,WAAOC,QAAQ,EAAEC,QAAQ,EAAK;IAC9D,IAAI;MACF,IAAMC,gBAAgB,GAAG,gDAAgD;MAEzE,IAAMC,YAAY,SAASC,cAAK,CAACC,IAAI,CAACH,gBAAgB,EAAE;QACtDI,OAAO,EAAE,KAAK;QACdC,MAAM,EAAE;UACNC,EAAE,EAAE,MAAM;UACVC,KAAK,EAAET,QAAQ;UACfC,QAAQ,EAAEA;QACZ;MACF,CAAC,CAAC;MAGF,IAAMS,SAAS,GAAGP,YAAY,CAACQ,IAAI,CAACC,MAAM,CAACC,UAAU;MACrDC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;MAE3B,MAAMC,SAAS,CAACN,SAAS,CAAC;IAC5B,CAAC,CAAC,OAAOO,KAAK,EAAE;MACd,IAAIA,KAAK,CAACC,YAAY,EAAE;QACxBJ,OAAO,CAACG,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAACE,MAAM,CAAC,CAAC,CAAC;MACrD,CAAC,MAAM;QACLL,OAAO,CAACG,KAAK,CAAC,kBAAkB,EAAEA,KAAK,CAAC;MAC1C;IACF;EACF,CAAC;EAAA,gBAzBKrB,yBAAyBA,CAAAwB,EAAA,EAAAC,GAAA;IAAA,OAAAxB,IAAA,CAAAyB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAyB9B;AAED,IAAMP,SAAS;EAAA,IAAAQ,KAAA,OAAA1B,kBAAA,CAAAC,OAAA,EAAG,WAAOW,SAAS,EAAK;IACrC,IAAI;MACF,IAAMe,eAAe,GAAG,mDAAmD;MAE3E,IAAMC,QAAQ,SAAStB,cAAK,CAACuB,GAAG,CAACF,eAAe,EAAE;QAChDG,OAAO,EAAE;UACPC,MAAM,EAAG,cAAanB,SAAU;QAClC;MACF,CAAC,CAAC;MACFI,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;MAErC,IAAMe,YAAY,GAAGJ,QAAQ,CAACf,IAAI;MAClCG,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEe,YAAY,CAAC;IAC9C,CAAC,CAAC,OAAOb,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;IAC5C;EACF,CAAC;EAAA,gBAhBKD,SAASA,CAAAe,GAAA;IAAA,OAAAP,KAAA,CAAAF,KAAA,OAAAC,SAAA;EAAA;AAAA,GAgBd;AAAC,IAAAS,QAAA,GAAAC,OAAA,CAAAlC,OAAA,GAEa;EACbH,yBAAyB,EAAzBA;AACF,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}